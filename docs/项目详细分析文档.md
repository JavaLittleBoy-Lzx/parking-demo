# æ™ºæ…§åœè½¦ç®¡ç†ç³»ç»Ÿ - é¡¹ç›®è¯¦ç»†åˆ†ææ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®åŸºæœ¬ä¿¡æ¯
- **é¡¹ç›®åç§°**: é›ªå„¿æ³Šè½¦ç®¡ç†ç³»ç»Ÿ (ParkingDemo)
- **é¡¹ç›®åŒ…å**: com.parkingmanage
- **æŠ€æœ¯æ ˆ**: Spring Boot 2.5.5 + MyBatis-Plus + MySQL + å¾®ä¿¡å°ç¨‹åº
- **å¼€å‘è¯­è¨€**: Java 1.8
- **æ•°æ®åº“**: MySQL (project_lzx)
- **æœåŠ¡ç«¯å£**: 8543
- **SSLæ”¯æŒ**: å·²é…ç½® (å¯é€‰å¯ç”¨)
- **ä½œè€…**: æå­é›„

### é¡¹ç›®å®šä½
è¿™æ˜¯ä¸€ä¸ªé›†æˆäº†æ™ºèƒ½åœè½¦ç®¡ç†ã€è½¦ç‰Œè¯†åˆ«ã€å¾®ä¿¡å°ç¨‹åºã€è®¿å®¢é¢„çº¦ç­‰åŠŸèƒ½çš„ç»¼åˆæ€§åœè½¦åœºç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå¤šè§’è‰²æƒé™ç®¡ç†å’Œæ™ºèƒ½åŒ–è¿è¥ã€‚ç³»ç»Ÿé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæä¾›RESTful APIæ¥å£ï¼Œæ”¯æŒå¾®ä¿¡å°ç¨‹åºå’ŒWebç®¡ç†åå°åŒç«¯è®¿é—®ã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æŠ€æœ¯æ¶æ„
```
å‰ç«¯å±‚: å¾®ä¿¡å°ç¨‹åº + Webç®¡ç†åå°
â”œâ”€â”€ å¾®ä¿¡å°ç¨‹åºç«¯ (è®¿å®¢é¢„çº¦ã€ä¸šä¸»æœåŠ¡)
â””â”€â”€ Webç®¡ç†åå° (ç®¡ç†å‘˜æ“ä½œ)

ä¸šåŠ¡å±‚: Spring Boot RESTful API
â”œâ”€â”€ Controllerå±‚ (49ä¸ªæ§åˆ¶å™¨ - APIæ¥å£)
â”œâ”€â”€ Serviceå±‚ (99ä¸ªæœåŠ¡ç±» - ä¸šåŠ¡é€»è¾‘)
â”œâ”€â”€ Mapperå±‚ (89ä¸ªæ˜ å°„å™¨ - æ•°æ®è®¿é—®)
â””â”€â”€ Entityå±‚ (76ä¸ªå®ä½“ç±» - æ•°æ®æ¨¡å‹)

æ•°æ®å±‚: MySQL + å¤–éƒ¨APIé›†æˆ
â”œâ”€â”€ æœ¬åœ°æ•°æ®åº“ (æ ¸å¿ƒä¸šåŠ¡æ•°æ®)
â”œâ”€â”€ ç™¾åº¦AI API (è½¦ç‰Œè¯†åˆ«)
â”œâ”€â”€ å¾®ä¿¡API (å°ç¨‹åºæˆæƒã€æ¶ˆæ¯æ¨é€)
â””â”€â”€ ç¬¬ä¸‰æ–¹åœè½¦åœºAPI (AIKEç³»ç»Ÿ)
```

### é¡¹ç›®ç»“æ„è¯¦è§£
```
src/main/java/com/parkingmanage/
â”œâ”€â”€ ParkingManageApplication.java     # ä¸»å¯åŠ¨ç±»
â”œâ”€â”€ SpringBootStartApplication.java   # å¤‡ç”¨å¯åŠ¨ç±»
â”œâ”€â”€ advice/          # å…¨å±€å¼‚å¸¸å¤„ç† (1ä¸ªç±»)
â”œâ”€â”€ common/          # å…¬å…±å·¥å…·ç±» (23ä¸ªç±»)
â”œâ”€â”€ config/          # é…ç½®ç±» (1ä¸ªç±»)
â”œâ”€â”€ controller/      # æ§åˆ¶å™¨å±‚ (49ä¸ªç±»)
â”œâ”€â”€ dto/             # æ•°æ®ä¼ è¾“å¯¹è±¡ (2ä¸ªç±»)
â”œâ”€â”€ entity/          # å®ä½“ç±» (76ä¸ªç±»)
â”œâ”€â”€ generator/       # ä»£ç ç”Ÿæˆå™¨ (2ä¸ªç±»)
â”œâ”€â”€ handle/          # å¤„ç†å™¨ (2ä¸ªç±»)
â”œâ”€â”€ mapper/          # æ•°æ®è®¿é—®å±‚ (89ä¸ªç±»)
â”œâ”€â”€ query/           # æŸ¥è¯¢å¯¹è±¡ (11ä¸ªç±»)
â”œâ”€â”€ service/         # ä¸šåŠ¡é€»è¾‘å±‚ (99ä¸ªç±»)
â”œâ”€â”€ utils/           # å·¥å…·ç±» (15ä¸ªç±»)
â””â”€â”€ vo/              # è§†å›¾å¯¹è±¡ (11ä¸ªç±»)
```

### æ ¸å¿ƒä¾èµ–
- **Spring Boot**: 2.5.5 (Webæ¡†æ¶)
- **MyBatis-Plus**: 3.3.1 (ORMæ¡†æ¶)
- **MySQL Connector**: 8.x (æ•°æ®åº“é©±åŠ¨)
- **Druid**: 1.2.6 (è¿æ¥æ± )
- **Swagger**: 2.9.2 (APIæ–‡æ¡£)
- **FastJSON**: 1.2.46 (JSONå¤„ç†)
- **JWT**: 3.10.3 (è®¤è¯)
- **Apache POI**: 4.1.2 (Excelå¤„ç†)
- **å¾®ä¿¡å¼€å‘åŒ…**: 4.4.0 (å¾®ä¿¡å°ç¨‹åºé›†æˆ)
- **ç™¾åº¦AI**: è‡ªå®šä¹‰é›†æˆ (è½¦ç‰Œè¯†åˆ«)

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. ç”¨æˆ·è§’è‰²ç®¡ç†ç³»ç»Ÿ
#### å››å±‚è§’è‰²åˆ¤æ–­æœºåˆ¶
1. **ç¬¬ä¸€å±‚: Butlerè¡¨ (ç®¡å®¶)** - æœ€é«˜æƒé™
2. **ç¬¬äºŒå±‚: Ownerinfoè¡¨ (ä¸šä¸»-æœ¬åœ°æ•°æ®)**
3. **ç¬¬ä¸‰å±‚: å¤–éƒ¨API (ä¸šä¸»-å¤–éƒ¨æ•°æ®)** - æœˆç¥¨ç³»ç»ŸéªŒè¯
4. **ç¬¬å››å±‚: Memberè¡¨ (è®¿å®¢)** - è®¿å®¢å’Œå¾…å®¡æ ¸ç”¨æˆ·

#### æƒé™ä½“ç³»
- **ç®¡å®¶æƒé™**: é¢„çº¦å®¡æ ¸ã€è¿è§„ç®¡ç†ã€ä¼šå‘˜å®¡æ ¸ã€è®¾æ–½ç®¡ç†ç­‰
- **ä¸šä¸»æƒé™**: åˆ›å»ºé¢„çº¦ã€æŸ¥è¯¢ä¸ªäººè®°å½•ã€ä¸¾æŠ¥è¿è§„ç­‰
- **è®¿å®¢æƒé™**: è®¿å®¢é¢„çº¦ã€åŸºç¡€æŸ¥è¯¢ç­‰

### 2. è½¦ç‰Œè¯†åˆ«ç³»ç»Ÿ
#### æŠ€æœ¯å®ç°
- **AIå¼•æ“**: ç™¾åº¦AIè½¦ç‰Œè¯†åˆ«API
- **è¯†åˆ«æ–¹å¼**: 
  - æ‘„åƒå¤´å®æ—¶æ‰«æ
  - ç›¸å†Œå›¾ç‰‡ä¸Šä¼ 
  - Base64å›¾ç‰‡è¯†åˆ«
- **åŠŸèƒ½ç‰¹æ€§**:
  - å¤šè½¦ç‰Œæ£€æµ‹æ”¯æŒ
  - å›¾ç‰‡é¢„å¤„ç†å’Œæ¸…ç†
  - è¯†åˆ«ç»“æœç¼“å­˜
  - è°ƒè¯•å’Œæµ‹è¯•æ¥å£

#### APIæ¥å£
```java
// è½¦ç‰Œè¯†åˆ«ä¸»æ¥å£
POST /parking/plateRecognition/recognize
// æµ‹è¯•æ¥å£
POST /parking/plateRecognition/test/recognize
// è°ƒè¯•æ¥å£  
POST /parking/plateRecognition/debug
```

### 3. å¾®ä¿¡å°ç¨‹åºé›†æˆ
#### æ ¸å¿ƒåŠŸèƒ½
- **ç”¨æˆ·æˆæƒ**: å¾®ä¿¡ç™»å½•ã€æ‰‹æœºå·è·å–
- **å°ç¨‹åºç ç”Ÿæˆ**: è®¿å®¢æ‰«ç ç›´æ¥è·³è½¬
- **æ¶ˆæ¯æ¨é€**: è¶…æ—¶æé†’ã€çŠ¶æ€é€šçŸ¥
- **è§’è‰²éªŒè¯**: å››å±‚è§’è‰²åˆ¤æ–­

#### é…ç½®ä¿¡æ¯
```yaml
wechat:
  miniapp:
    appid: wx112d8a922018480e
    secret: c4c0609fbbaf3ecb0a56314cea15f0c8
    token-cache-time: 7000
```

### 4. è®¿å®¢é¢„çº¦ç³»ç»Ÿ
#### ä¸šåŠ¡æµç¨‹
1. **è®¿å®¢ç”³è¯·**: å¡«å†™ä¸ªäººä¿¡æ¯ã€è®¿é—®ç›®çš„
2. **ä¸šä¸»ä¿¡æ¯è‡ªåŠ¨å¡«å……**: æ ¹æ®åœ°å€åŒ¹é…ä¸šä¸»ä¿¡æ¯
3. **å®¡æ ¸æµç¨‹**: ç®¡å®¶å®¡æ ¸è®¿å®¢ç”³è¯·
4. **é¢„çº¦ç¡®è®¤**: ç”Ÿæˆé¢„çº¦è®°å½•å’ŒäºŒç»´ç 
5. **è¿›å‡ºç®¡ç†**: è½¦è¾†è¿›å‡ºåœºè®°å½•

#### æ•°æ®æ¨¡å‹
- **VisitorApplication**: è®¿å®¢ç”³è¯·è¡¨
- **Appointment**: é¢„çº¦è®°å½•è¡¨
- **VehicleReservation**: è½¦è¾†é¢„çº¦è¡¨

### 5. åœè½¦è¶…æ—¶æé†’ç³»ç»Ÿ
#### å®ç°æ–¹æ¡ˆ
- **å®šæ—¶ä»»åŠ¡**: æ¯5åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
- **æé†’æœºåˆ¶**: è¶…æ—¶å‰15åˆ†é’Ÿå¾®ä¿¡æ¨é€
- **é…ç½®åŒ–**: ä¸åŒè½¦è¾†ç±»å‹ä¸åŒè¶…æ—¶æ—¶é—´
- **æ¶ˆæ¯è®°å½•**: å®Œæ•´çš„æ¨é€æ—¥å¿—

#### è¶…æ—¶é…ç½®
```yaml
parking:
  timeout:
    check-interval: 300000  # 5åˆ†é’Ÿæ£€æŸ¥é—´éš”
    warning-minutes: 15     # æå‰15åˆ†é’Ÿæé†’
    default-timeout:
      temp: 120      # ä¸´æ—¶è½¦è¾†2å°æ—¶
      visitor: 180   # è®¿å®¢è½¦è¾†3å°æ—¶  
      owner: 720     # ä¸šä¸»è½¦è¾†12å°æ—¶
```

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒæ•°æ®è¡¨
1. **ç”¨æˆ·ç›¸å…³**
   - `butler`: ç®¡å®¶ä¿¡æ¯è¡¨
   - `ownerinfo`: ä¸šä¸»ä¿¡æ¯è¡¨
   - `member`: ä¼šå‘˜ä¿¡æ¯è¡¨
   - `visitor_application`: è®¿å®¢ç”³è¯·è¡¨

2. **åœè½¦ç›¸å…³**
   - `vehicle_reservation`: è½¦è¾†é¢„çº¦è¡¨
   - `appointment`: é¢„çº¦è®°å½•è¡¨
   - `parking`: åœè½¦è®°å½•è¡¨
   - `parking_timeout_config`: è¶…æ—¶é…ç½®è¡¨

3. **ç³»ç»Ÿç›¸å…³**
   - `area`: åŒºåŸŸä¿¡æ¯è¡¨
   - `yard_info`: è½¦åœºä¿¡æ¯è¡¨
   - `channel_info`: é€šé“ä¿¡æ¯è¡¨
   - `message_notification_log`: æ¶ˆæ¯æ¨é€æ—¥å¿—è¡¨

### æ•°æ®åº“é…ç½®
```yaml
spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://www.xuerparking.cn:3306/project_lzx
    username: root
    password: 123456
    type: com.alibaba.druid.pool.DruidDataSource
```

## ğŸ”§ å…³é”®æŠ€æœ¯å®ç°

### 1. è½¦ç‰Œè¯†åˆ«é›†æˆ
```java
@Service
public class PlateRecognitionServiceImpl {
    // ç™¾åº¦AIè½¦ç‰Œè¯†åˆ«
    public PlateRecognitionResult recognizePlateFromBase64(String base64Image) {
        String token = getAccessToken();
        String result = callBaiduPlateAPI(token, base64Image, request);
        return parseRecognitionResult(result);
    }
}
```

### 2. å¾®ä¿¡å°ç¨‹åºæˆæƒ
```java
@RestController
public class WeChatAuthController {
    // å››å±‚è§’è‰²åˆ¤æ–­
    public Map<String, Object> determineUserRole(String phoneNumber, String openid) {
        if (isManager(phoneNumber)) return buildManagerInfo();
        if (isLocalOwner(phoneNumber)) return buildOwnerInfo();
        if (ownerRoleVerificationService.isOwnerByPhoneNumber(phoneNumber)) 
            return buildExternalOwnerInfo();
        return buildUnregisteredInfo();
    }
}
```

### 3. å®šæ—¶ä»»åŠ¡å®ç°
```java
@Component
public class ParkingTimeoutNotificationService {
    @Scheduled(fixedRate = 300000) // 5åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡
    public void checkAndSendTimeoutNotifications() {
        List<VehicleReservation> timeoutVehicles = getTimeoutWarningVehicles();
        for (VehicleReservation vehicle : timeoutVehicles) {
            sendTimeoutWarningMessage(vehicle);
        }
    }
}
```

## ğŸš€ APIæ¥å£æ–‡æ¡£

### ä¸»è¦æ¥å£åˆ†ç±»
1. **è½¦è¾†é¢„çº¦ç®¡ç†** (`/parking/vehicleReservation`)
   - è½¦è¾†é¢„çº¦CRUD
   - è¶…æ—¶è½¦è¾†æ¸…ç†
   - åœè½¦åœºä¿¡æ¯æŸ¥è¯¢

2. **è®¿å®¢ç”³è¯·ç®¡ç†** (`/parking/visitorApplication`)
   - è®¿å®¢ç”³è¯·æäº¤
   - ç”³è¯·çŠ¶æ€æŸ¥è¯¢
   - å®¡æ ¸æµç¨‹ç®¡ç†

3. **å¾®ä¿¡æˆæƒ** (`/parking/wechat`)
   - æ‰‹æœºå·æˆæƒç™»å½•
   - è§’è‰²æƒé™éªŒè¯
   - ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢

4. **è½¦ç‰Œè¯†åˆ«** (`/parking/plateRecognition`)
   - å›¾ç‰‡è¯†åˆ«æ¥å£
   - æµ‹è¯•è°ƒè¯•æ¥å£
   - è¯†åˆ«ç»“æœæŸ¥è¯¢

### Swaggeræ–‡æ¡£é…ç½®
```yaml
swagger:
  basePackage: com.parkingmanage
  title: é›ªå„¿æ³Šè½¦ç®¡ç†ç³»ç»Ÿ
  description: é›ªå„¿æ³Šè½¦ç®¡ç†ç³»ç»Ÿ
  version: V1.0
```
è®¿é—®åœ°å€: `http://www.xuerparking.cn:8543/swagger-ui.html`

## ğŸ” å®‰å…¨ä¸é…ç½®

### SSLé…ç½® (å¯é€‰)
```yaml
server:
  ssl:
    key-store-password: 2xffjgct
    key-store-type: JKS
    key-store: www.xuerparking.cn.jks
```

### æ—¥å¿—é…ç½®
```yaml
logging:
  file:
    path: /usr/local/parking_demo/logs
    name: ParkingDemo.log
    max-size: 10MB
    max-history: 30
```

### æ–‡ä»¶ä¸Šä¼ é…ç½®
```yaml
file:
  upload-path: D:/uploadfile/
spring:
  servlet:
    multipart:
      max-file-size: 50MB
      max-request-size: 50MB
```

## ğŸ“ˆ ç³»ç»Ÿç‰¹è‰²åŠŸèƒ½

### 1. æ™ºèƒ½è§’è‰²è¯†åˆ«
- å¤šæ•°æ®æºéªŒè¯ç”¨æˆ·èº«ä»½
- ç¼“å­˜æœºåˆ¶æå‡æ€§èƒ½
- æƒé™åŠ¨æ€åˆ†é…

### 2. è½¦ç‰Œè¯†åˆ«ä¼˜åŒ–
- å›¾ç‰‡é¢„å¤„ç†æå‡è¯†åˆ«ç‡
- å¤šç§è¯†åˆ«æ–¹å¼æ”¯æŒ
- è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯

### 3. å¾®ä¿¡ç”Ÿæ€é›†æˆ
- å°ç¨‹åºç è‡ªåŠ¨ç”Ÿæˆ
- æ¶ˆæ¯æ¨¡æ¿æ¨é€
- ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### 4. æ•°æ®åŒæ­¥æœºåˆ¶
- æœ¬åœ°æ•°æ®ä¸å¤–éƒ¨APIåŒæ­¥
- å®æ—¶æ•°æ®æ›´æ–°
- å¼‚å¸¸å¤„ç†ä¿æŠ¤

## ğŸ› ï¸ éƒ¨ç½²ä¸è¿ç»´

### ç¯å¢ƒè¦æ±‚
- **JDK**: 1.8+
- **MySQL**: 5.7+
- **Maven**: 3.6+
- **æ“ä½œç³»ç»Ÿ**: Windows/Linux

### å¯åŠ¨æ–¹å¼
```bash
# Mavenå¯åŠ¨
mvn spring-boot:run

# JARåŒ…å¯åŠ¨
java -jar parkingmanage-0.0.1-SNAPSHOT.jar
```

### ç›‘æ§ç«¯ç‚¹
```yaml
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
```

## ğŸ“ å¼€å‘è§„èŒƒ

### ä»£ç ç»“æ„
```
src/main/java/com/parkingmanage/
â”œâ”€â”€ controller/     # æ§åˆ¶å™¨å±‚
â”œâ”€â”€ service/        # æœåŠ¡å±‚
â”œâ”€â”€ mapper/         # æ•°æ®è®¿é—®å±‚
â”œâ”€â”€ entity/         # å®ä½“ç±»
â”œâ”€â”€ dto/           # æ•°æ®ä¼ è¾“å¯¹è±¡
â”œâ”€â”€ vo/            # è§†å›¾å¯¹è±¡
â”œâ”€â”€ config/        # é…ç½®ç±»
â”œâ”€â”€ utils/         # å·¥å…·ç±»
â””â”€â”€ common/        # å…¬å…±ç»„ä»¶
```

### å‘½åè§„èŒƒ
- **Controller**: ä»¥Controllerç»“å°¾
- **Service**: ä»¥Serviceç»“å°¾ï¼Œå®ç°ç±»ä»¥ServiceImplç»“å°¾
- **Mapper**: ä»¥Mapperç»“å°¾
- **Entity**: å®ä½“ç±»åä¸æ•°æ®è¡¨åå¯¹åº”

## ğŸ”„ æ‰©å±•å»ºè®®

### çŸ­æœŸä¼˜åŒ–
1. å®Œå–„Memberå®ä½“ç±»å­—æ®µ
2. å®ç°çœŸå®OpenIDè·å–
3. æ·»åŠ Redisç¼“å­˜é…ç½®
4. ä¼˜åŒ–è½¦ç‰Œè¯†åˆ«å‡†ç¡®ç‡

### ä¸­æœŸè§„åˆ’
1. å®ç°æ•°æ®åŒæ­¥æœºåˆ¶
2. æ·»åŠ è§’è‰²åˆ‡æ¢æ—¥å¿—
3. ä¼˜åŒ–APIè°ƒç”¨é¢‘ç‡
4. å¢åŠ ç§»åŠ¨ç«¯ç®¡ç†åŠŸèƒ½

### é•¿æœŸå‘å±•
1. å®ç°åˆ†å¸ƒå¼ç¼“å­˜
2. æ·»åŠ ç›‘æ§å’Œå‘Šè­¦
3. æ”¯æŒæ›´å¤šè§’è‰²ç±»å‹
4. é›†æˆæ›´å¤šAIåŠŸèƒ½

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### è”ç³»æ–¹å¼
- **å¼€å‘è€…**: æå­é›„
- **é¡¹ç›®åœ°å€**: `d:\PakingDemo\car-new-demo-2\car-new-demo`
- **æ–‡æ¡£æ›´æ–°**: 2025å¹´7æœˆ

### ç›¸å…³æ–‡æ¡£
- [å››å±‚è§’è‰²åˆ¤æ–­ç³»ç»Ÿå®ç°æ–‡æ¡£](docs/å››å±‚è§’è‰²åˆ¤æ–­ç³»ç»Ÿå®ç°æ–‡æ¡£.md)
- [è½¦è¾†åœè½¦è¶…æ—¶æé†’åŠŸèƒ½å®ç°æ–¹æ¡ˆ](docs/è½¦è¾†åœè½¦è¶…æ—¶æé†’åŠŸèƒ½å®ç°æ–¹æ¡ˆ.md)
- [å¾®ä¿¡å°ç¨‹åºç éƒ¨ç½²æŒ‡å—](docs/å¾®ä¿¡å°ç¨‹åºç éƒ¨ç½²æŒ‡å—.md)
- [è®¿å®¢é¢„çº¦è‡ªåŠ¨å¡«å……ä¸šä¸»ä¿¡æ¯åŠŸèƒ½è¯´æ˜](docs/è®¿å®¢é¢„çº¦è‡ªåŠ¨å¡«å……ä¸šä¸»ä¿¡æ¯åŠŸèƒ½è¯´æ˜.md)

### é—®é¢˜æ’æŸ¥
1. æ£€æŸ¥ç³»ç»Ÿæ—¥å¿—ä¸­çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯
2. éªŒè¯å¤–éƒ¨APIè°ƒç”¨å“åº”
3. ç¡®è®¤ç¼“å­˜å‘½ä¸­æƒ…å†µ
4. æ£€æŸ¥æ•°æ®åº“è¿æ¥çŠ¶æ€

## ğŸ¨ å‰ç«¯æŠ€æœ¯æ ˆåˆ†æ

### å¾®ä¿¡å°ç¨‹åºç«¯
åŸºäºé¡¹ç›®ä¸­çš„`package.json`æ–‡ä»¶åˆ†æï¼š

```json
{
    "name": "xueren-parking",
    "displayName": "é›ªäººåœè½¦",
    "version": "1.0.3",
    "keywords": [
        "æ´—è½¦å…»è½¦", "é¢„çº¦ä¿å…»", "è½¦è¾†ç»´ä¿®",
        "ä¸Šé—¨æœåŠ¡", "æ‰«ç æŒªè½¦"
    ],
    "dependencies": {
        "dayjs": "^1.11.13",      // æ—¥æœŸå¤„ç†åº“
        "thorui-uni": "^3.0.0"   // UIç»„ä»¶åº“
    }
}
```

### ä¸»è¦é¡µé¢åŠŸèƒ½
1. **è®¿å®¢æŸ¥è¯¢é¡µé¢** (`pages/reservation/visitor-query.vue`)
   - è®¿å®¢é¢„çº¦è®°å½•æŸ¥è¯¢
   - å®æ—¶çŠ¶æ€æ›´æ–°
   - å¤šç§æŸ¥è¯¢æ–¹å¼æ”¯æŒ

2. **è½¦ç‰Œè¯†åˆ«é¡µé¢**
   - æ‘„åƒå¤´å®æ—¶æ‰«æ
   - ç›¸å†Œå›¾ç‰‡é€‰æ‹©
   - è¯†åˆ«ç»“æœå±•ç¤º

3. **ç”¨æˆ·æˆæƒé¡µé¢**
   - å¾®ä¿¡ç™»å½•æˆæƒ
   - æ‰‹æœºå·è·å–
   - è§’è‰²æƒé™éªŒè¯

## ğŸ” è¯¦ç»†åŠŸèƒ½åˆ†æ

### 1. è½¦ç‰Œè¯†åˆ«ç³»ç»Ÿæ·±åº¦è§£æ

#### ç™¾åº¦AIé…ç½®
```yaml
baidu:
  ai:
    app-id: 103715637
    api-key: 45kdY5Q4wyGLiFNUbOtU8j8U
    secret-key: GBWTclI2hmOAYp4I1BvZLgxHWjXJbMU6
    base-url: https://aip.baidubce.com
    token-url: /oauth/2.0/token
    plate-url: /rest/2.0/ocr/v1/license_plate
    token-cache-minutes: 25
```

#### è¯†åˆ«æµç¨‹
1. **å›¾ç‰‡é¢„å¤„ç†**: æ¸…ç†Base64æ•°æ®ï¼Œå»é™¤å‰ç¼€
2. **Tokenè·å–**: ç¼“å­˜æœºåˆ¶ï¼Œ25åˆ†é’Ÿæœ‰æ•ˆæœŸ
3. **APIè°ƒç”¨**: å‘é€è¯†åˆ«è¯·æ±‚åˆ°ç™¾åº¦AI
4. **ç»“æœè§£æ**: è§£æJSONå“åº”ï¼Œæå–è½¦ç‰Œä¿¡æ¯
5. **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œé‡è¯•æœºåˆ¶

#### æ ¸å¿ƒä»£ç å®ç°
<augment_code_snippet path="src/main/java/com/parkingmanage/service/impl/PlateRecognitionServiceImpl.java" mode="EXCERPT">
````java
public PlateRecognitionResult recognizePlateFromBase64(String base64Image, PlateRecognitionRequest request) {
    try {
        // è·å–è®¿é—®ä»¤ç‰Œ
        String token = getAccessToken();
        if (token == null) {
            log.error("è·å–ç™¾åº¦AIè®¿é—®ä»¤ç‰Œå¤±è´¥");
            return PlateRecognitionResult.error("è·å–è®¿é—®ä»¤ç‰Œå¤±è´¥");
        }

        // è°ƒç”¨ç™¾åº¦è½¦ç‰Œè¯†åˆ«API
        String result = callBaiduPlateAPI(token, base64Image, request);

        // è§£æè¯†åˆ«ç»“æœ
        return parseRecognitionResult(result);

    } catch (Exception e) {
        log.error("è½¦ç‰Œè¯†åˆ«å¼‚å¸¸", e);
        return PlateRecognitionResult.error("è¯†åˆ«å¼‚å¸¸: " + e.getMessage());
    }
}
````
</augment_code_snippet>

### 2. å¾®ä¿¡å°ç¨‹åºé›†æˆè¯¦è§£

#### å°ç¨‹åºç ç”Ÿæˆæœºåˆ¶
ç³»ç»Ÿæ”¯æŒä¸‰ç§é™çº§æ–¹æ¡ˆï¼š
1. **ä¸»æ–¹æ¡ˆ**: `getwxacodeunlimit` æ¥å£ç”Ÿæˆæ— é™åˆ¶å°ç¨‹åºç 
2. **é™çº§æ–¹æ¡ˆ1**: `createwxaqrcode` æ¥å£ç”Ÿæˆæ ‡å‡†å°ç¨‹åºç 
3. **é™çº§æ–¹æ¡ˆ2**: ä½¿ç”¨é»˜è®¤é¡µé¢ç”Ÿæˆå°ç¨‹åºç 

<augment_code_snippet path="src/main/java/com/parkingmanage/service/WechatMiniProgramService.java" mode="EXCERPT">
````java
// æ„å»ºåœºæ™¯å€¼ï¼ˆæœ€å¤š32ä½å­—ç¬¦ï¼‰
String scene = buildSceneValue(butlerPhone, community, province, city, district);

// è·å–Access Token
String accessToken = getAccessToken();

// å°è¯•ä½¿ç”¨getwxacodeunlimitæ¥å£ç”Ÿæˆå°ç¨‹åºç 
return generateWithUnlimitedCode(accessToken, scene, targetPage);
````
</augment_code_snippet>

#### ç”¨æˆ·æˆæƒæµç¨‹
1. **å¾®ä¿¡ç™»å½•**: è·å–codeã€sessionKeyã€openid
2. **æ‰‹æœºå·è§£å¯†**: ä½¿ç”¨AESè§£å¯†è·å–çœŸå®æ‰‹æœºå·
3. **è§’è‰²åˆ¤æ–­**: å››å±‚è§’è‰²éªŒè¯æœºåˆ¶
4. **æƒé™åˆ†é…**: æ ¹æ®è§’è‰²åˆ†é…ç›¸åº”æƒé™

### 3. è®¿å®¢é¢„çº¦ç³»ç»Ÿä¸šåŠ¡é€»è¾‘

#### ä¸šä¸»ä¿¡æ¯è‡ªåŠ¨å¡«å……
ç³»ç»Ÿé€šè¿‡åœ°å€ä¿¡æ¯è‡ªåŠ¨åŒ¹é…ä¸šä¸»ä¿¡æ¯ï¼š

<augment_code_snippet path="src/main/java/com/parkingmanage/controller/AppointmentController.java" mode="EXCERPT">
````java
// é€šè¿‡æ‰‹æœºå·æŸ¥è¯¢åœ°å€ä¿¡æ¯å’Œä¸šä¸»ä¿¡æ¯ï¼ˆä¼˜å…ˆè®¿å®¢æ‰‹æœºï¼Œå…¶æ¬¡ä¸šä¸»æ‰‹æœºï¼‰
VisitorApplication foundApplication = null;
String queryPhone = null;

// é¦–å…ˆå°è¯•é€šè¿‡è®¿å®¢æ‰‹æœºå·æŸ¥è¯¢
String visitorPhone = appointment.getVisitorphone();
if (visitorPhone != null && !visitorPhone.isEmpty()) {
    foundApplication = visitorApplicationService.getByPhone(visitorPhone);
    queryPhone = visitorPhone;
}
````
</augment_code_snippet>

#### é¢„çº¦çŠ¶æ€ç®¡ç†
- **å¾…å®¡æ‰¹**: è®¿å®¢æäº¤ç”³è¯·åçš„åˆå§‹çŠ¶æ€
- **å·²é€šè¿‡**: ç®¡å®¶å®¡æ ¸é€šè¿‡
- **å·²æ‹’ç»**: ç®¡å®¶å®¡æ ¸æ‹’ç»
- **å·²å®Œæˆ**: è®¿å®¢å®Œæˆè®¿é—®

### 4. å¤–éƒ¨APIé›†æˆåˆ†æ

#### AIKEåœè½¦åœºç³»ç»Ÿé›†æˆ
ç³»ç»Ÿé›†æˆäº†ç¬¬ä¸‰æ–¹åœè½¦åœºç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒï¼š
- åœè½¦åœºä¿¡æ¯æŸ¥è¯¢
- è½¦è¾†è¿›å‡ºè®°å½•
- æœˆç¥¨ç®¡ç†
- å®æ—¶è½¦ä½çŠ¶æ€

<augment_code_snippet path="src/main/java/com/parkingmanage/controller/VehicleReservationController.java" mode="EXCERPT">
````java
@ApiOperation("è·å–æˆæƒåœè½¦åœºç¼–ç åˆ—è¡¨")
@GetMapping("/getParkInfo")
public ResponseEntity getParkInfo(String parkCode) {
    HashMap<String, Object> params = new HashMap<>();
    params.put("parkCode", parkCode);
    JSONObject data = aikeConfig.downHandler(AIKEConfig.AK_URL, AIKEConfig.AK_KEY, AIKEConfig.AK_SECRET, "getParkInfo", params);
    return ResponseEntity.ok(data);
}
````
</augment_code_snippet>

## ğŸ“‹ ä¸šåŠ¡æµç¨‹å›¾

### è®¿å®¢é¢„çº¦å®Œæ•´æµç¨‹
```mermaid
graph TD
    A[è®¿å®¢æ‰«ç ] --> B[å¾®ä¿¡æˆæƒç™»å½•]
    B --> C[å¡«å†™è®¿å®¢ä¿¡æ¯]
    C --> D[è‡ªåŠ¨åŒ¹é…ä¸šä¸»ä¿¡æ¯]
    D --> E[æäº¤é¢„çº¦ç”³è¯·]
    E --> F[ç®¡å®¶å®¡æ ¸]
    F --> G{å®¡æ ¸ç»“æœ}
    G -->|é€šè¿‡| H[ç”Ÿæˆé¢„çº¦ç ]
    G -->|æ‹’ç»| I[å‘é€æ‹’ç»é€šçŸ¥]
    H --> J[è®¿å®¢åˆ°åœº]
    J --> K[è½¦ç‰Œè¯†åˆ«è¿›åœº]
    K --> L[è¶…æ—¶æé†’ç›‘æ§]
    L --> M[è½¦è¾†ç¦»åœº]
```

### è§’è‰²æƒé™éªŒè¯æµç¨‹
```mermaid
graph TD
    A[ç”¨æˆ·ç™»å½•] --> B[è·å–æ‰‹æœºå·]
    B --> C[ç¬¬ä¸€å±‚ï¼šButlerè¡¨æŸ¥è¯¢]
    C --> D{æ˜¯å¦ä¸ºç®¡å®¶?}
    D -->|æ˜¯| E[è¿”å›ç®¡å®¶æƒé™]
    D -->|å¦| F[ç¬¬äºŒå±‚ï¼šOwnerinfoè¡¨æŸ¥è¯¢]
    F --> G{æ˜¯å¦ä¸ºæœ¬åœ°ä¸šä¸»?}
    G -->|æ˜¯| H[è¿”å›ä¸šä¸»æƒé™]
    G -->|å¦| I[ç¬¬ä¸‰å±‚ï¼šå¤–éƒ¨APIæŸ¥è¯¢]
    I --> J{æ˜¯å¦ä¸ºå¤–éƒ¨ä¸šä¸»?}
    J -->|æ˜¯| K[è¿”å›ä¸šä¸»æƒé™]
    J -->|å¦| L[ç¬¬å››å±‚ï¼šMemberè¡¨æŸ¥è¯¢]
    L --> M[è¿”å›è®¿å®¢æƒé™]
```

## ğŸ”§ ç³»ç»Ÿé…ç½®è¯¦è§£

### æ•°æ®åº“è¿æ¥æ± é…ç½®
```yaml
spring:
  datasource:
    type: com.alibaba.druid.pool.DruidDataSource
    # æ”¯æŒå¤šç¯å¢ƒé…ç½®
    # æœ¬åœ°ç¯å¢ƒ: www.xuerparking.cn:3306
    # æµ‹è¯•ç¯å¢ƒ: 121.41.131.154:3306
    # ç”Ÿäº§ç¯å¢ƒ: www.xuerparking.cn:3306
```

### MyBatis-Plusé…ç½®
```yaml
mybatis-plus:
  mapper-locations: classpath:**/mapper/xml/*.xml
  type-aliases-package: com.parkingmanage.entity
  global-config:
    db-config:
      logic-delete-field: deleted
      logic-delete-value: 1
      logic-not-delete-value: 0
```

### ç¼“å­˜é…ç½®å»ºè®®
è™½ç„¶å½“å‰é¡¹ç›®æœªå¯ç”¨Redisï¼Œä½†å»ºè®®æ·»åŠ ï¼š
```yaml
spring:
  redis:
    host: www.xuerparking.cn
    port: 6379
    timeout: 2000ms
    lettuce:
      pool:
        max-active: 8
        max-idle: 8
        min-idle: 0
```

## ğŸš¨ å·²çŸ¥é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### 1. Memberå®ä½“ç±»å­—æ®µç¼ºå¤±
**é—®é¢˜**: Memberå®ä½“ç±»ç¼ºå°‘`auditstatus`å’Œ`openid`å­—æ®µ
**å½±å“**: ç¬¬å››å±‚è§’è‰²æŸ¥è¯¢æš‚æ—¶è·³è¿‡
**è§£å†³æ–¹æ¡ˆ**:
```sql
ALTER TABLE member
ADD COLUMN auditstatus VARCHAR(20) DEFAULT 'å¾…å®¡æ ¸',
ADD COLUMN openid VARCHAR(100) DEFAULT NULL;
```

### 2. OpenIDè·å–é—®é¢˜
**é—®é¢˜**: å½“å‰ä½¿ç”¨æ¨¡æ‹Ÿopenid
**è§£å†³æ–¹æ¡ˆ**: å®Œå–„WeChatUtilsç±»ï¼ŒåŒæ—¶è·å–sessionKeyå’Œopenid

### 3. æ€§èƒ½ä¼˜åŒ–å»ºè®®
**é—®é¢˜**: å¤–éƒ¨APIè°ƒç”¨é¢‘ç¹
**è§£å†³æ–¹æ¡ˆ**:
- å¯ç”¨Redisç¼“å­˜
- å®ç°æ‰¹é‡æŸ¥è¯¢
- æ·»åŠ é™çº§æœºåˆ¶

## ğŸ“Š æ€§èƒ½ç›‘æ§æŒ‡æ ‡

### å…³é”®æ€§èƒ½æŒ‡æ ‡
1. **APIå“åº”æ—¶é—´**
   - è½¦ç‰Œè¯†åˆ«: < 3ç§’
   - ç”¨æˆ·æˆæƒ: < 1ç§’
   - é¢„çº¦æŸ¥è¯¢: < 500ms

2. **ç³»ç»Ÿååé‡**
   - å¹¶å‘ç”¨æˆ·æ•°: 100+
   - æ—¥å¤„ç†é¢„çº¦: 1000+
   - è½¦ç‰Œè¯†åˆ«å‡†ç¡®ç‡: 95%+

3. **èµ„æºä½¿ç”¨ç‡**
   - CPUä½¿ç”¨ç‡: < 70%
   - å†…å­˜ä½¿ç”¨ç‡: < 80%
   - æ•°æ®åº“è¿æ¥æ± : < 80%

## ğŸ”„ ç‰ˆæœ¬æ›´æ–°è®°å½•

### v1.0.3 (å½“å‰ç‰ˆæœ¬)
- âœ… å®Œå–„å››å±‚è§’è‰²åˆ¤æ–­ç³»ç»Ÿ
- âœ… é›†æˆç™¾åº¦AIè½¦ç‰Œè¯†åˆ«
- âœ… å®ç°åœè½¦è¶…æ—¶æé†’åŠŸèƒ½
- âœ… ä¼˜åŒ–è®¿å®¢é¢„çº¦æµç¨‹
- âœ… æ·»åŠ å¾®ä¿¡å°ç¨‹åºç ç”Ÿæˆ

### è®¡åˆ’æ›´æ–° v1.1.0
- ğŸ”„ å®Œå–„Memberå®ä½“ç±»
- ğŸ”„ å®ç°çœŸå®OpenIDè·å–
- ğŸ”„ æ·»åŠ Redisç¼“å­˜æ”¯æŒ
- ğŸ”„ ä¼˜åŒ–è½¦ç‰Œè¯†åˆ«å‡†ç¡®ç‡
- ğŸ”„ å¢åŠ æ•°æ®ç»Ÿè®¡åŠŸèƒ½

## ğŸ›¡ï¸ å®‰å…¨æœºåˆ¶åˆ†æ

### 1. æ•°æ®åŠ å¯†
- **æ‰‹æœºå·åŠ å¯†**: ä½¿ç”¨AESåŠ å¯†å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- **APIå¯†é’¥ç®¡ç†**: é…ç½®æ–‡ä»¶ä¸­çš„å¯†é’¥éœ€è¦ç¯å¢ƒå˜é‡ä¿æŠ¤
- **JWT Token**: ç”¨æˆ·è®¤è¯é‡‡ç”¨JWTæœºåˆ¶

### 2. æƒé™æ§åˆ¶
```java
// æƒé™éªŒè¯ç¤ºä¾‹
@ApiOperation("æ£€æŸ¥ç”¨æˆ·æƒé™")
@GetMapping("/checkPermission")
public Result checkPermission(String phoneNumber, String permission, String openid) {
    Map<String, Object> userRole = determineUserRole(phoneNumber, openid);
    String[] permissions = (String[]) userRole.get("permissions");
    boolean hasPermission = Arrays.asList(permissions).contains(permission);
    return Result.success(hasPermission);
}
```

### 3. æ•°æ®éªŒè¯
- **è¾“å…¥éªŒè¯**: æ‰€æœ‰ç”¨æˆ·è¾“å…¥éƒ½è¿›è¡Œæ ¼å¼éªŒè¯
- **SQLæ³¨å…¥é˜²æŠ¤**: ä½¿ç”¨MyBatis-Pluså‚æ•°åŒ–æŸ¥è¯¢
- **XSSé˜²æŠ¤**: å‰ç«¯è¾“å…¥è¿‡æ»¤å’Œåç«¯éªŒè¯

## ğŸ“± ç§»åŠ¨ç«¯é›†æˆæŒ‡å—

### å¾®ä¿¡å°ç¨‹åºå¼€å‘é…ç½®
1. **å¼€å‘è€…å·¥å…·**: å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. **AppIDé…ç½®**: `wx112d8a922018480e`
3. **æœåŠ¡å™¨åŸŸå**: éœ€è¦åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°é…ç½®åˆæ³•åŸŸå

### å…³é”®é¡µé¢å®ç°
<augment_code_snippet path="pages/reservation/visitor-query.vue" mode="EXCERPT">
````javascript
// è®¿å®¢æŸ¥è¯¢é¡µé¢æ ¸å¿ƒé€»è¾‘
async loadUserReservations() {
    const response = await uni.request({
        url: `http://www.xuerparking.cn:8543/parking/appointment/listByPhone`,
        method: 'GET',
        data: { phone: currentUserPhone },
        header: { 'Content-Type': 'application/json' },
        timeout: 15000
    });

    if (response.statusCode === 200 && response.data) {
        this.reservations = response.data.data || [];
    }
}
````
</augment_code_snippet>

## ğŸ”Œ ç¬¬ä¸‰æ–¹é›†æˆè¯¦è§£

### 1. ç™¾åº¦AIé›†æˆ
#### è®¤è¯æµç¨‹
```java
// è·å–ç™¾åº¦AIè®¿é—®ä»¤ç‰Œ
private String getAccessToken() {
    String url = baiduConfig.getBaseUrl() + baiduConfig.getTokenUrl();
    Map<String, String> params = new HashMap<>();
    params.put("grant_type", "client_credential");
    params.put("client_id", baiduConfig.getApiKey());
    params.put("client_secret", baiduConfig.getSecretKey());

    String response = HttpClientUtils.doPost(url, params);
    // è§£æå¹¶ç¼“å­˜token
    return parseTokenFromResponse(response);
}
```

#### å›¾ç‰‡å¤„ç†
```java
// å›¾ç‰‡é¢„å¤„ç†
public String cleanBase64Image(String base64Image) {
    if (base64Image.contains(",")) {
        return base64Image.substring(base64Image.indexOf(",") + 1);
    }
    return base64Image;
}
```

### 2. AIKEåœè½¦åœºç³»ç»Ÿé›†æˆ
#### APIè°ƒç”¨å°è£…
```java
public class AIKEConfig {
    public static final String AK_URL = "é…ç½®çš„APIåœ°å€";
    public static final String AK_KEY = "é…ç½®çš„APIå¯†é’¥";
    public static final String AK_SECRET = "é…ç½®çš„APIç§˜é’¥";

    public JSONObject downHandler(String url, String key, String secret,
                                 String cmd, Map<String, Object> params) {
        // æ„å»ºè¯·æ±‚å‚æ•°
        // å‘é€HTTPè¯·æ±‚
        // è§£æå“åº”ç»“æœ
        return responseJson;
    }
}
```

## ğŸ“ˆ æ•°æ®ç»Ÿè®¡ä¸åˆ†æ

### 1. ä¸šåŠ¡æ•°æ®ç»Ÿè®¡
```sql
-- æ¯æ—¥é¢„çº¦ç»Ÿè®¡
SELECT DATE(create_time) as date, COUNT(*) as count
FROM appointment
WHERE create_time >= DATE_SUB(NOW(), INTERVAL 30 DAY)
GROUP BY DATE(create_time);

-- è½¦ç‰Œè¯†åˆ«æˆåŠŸç‡ç»Ÿè®¡
SELECT
    DATE(recognition_time) as date,
    COUNT(*) as total_attempts,
    SUM(CASE WHEN success = 1 THEN 1 ELSE 0 END) as successful,
    ROUND(SUM(CASE WHEN success = 1 THEN 1 ELSE 0 END) * 100.0 / COUNT(*), 2) as success_rate
FROM plate_recognition_log
GROUP BY DATE(recognition_time);
```

### 2. ç³»ç»Ÿæ€§èƒ½ç›‘æ§
```java
@Component
public class PerformanceMonitor {

    @EventListener
    public void handleApiCall(ApiCallEvent event) {
        // è®°å½•APIè°ƒç”¨æ—¶é—´
        // ç»Ÿè®¡æˆåŠŸ/å¤±è´¥ç‡
        // ç›‘æ§å“åº”æ—¶é—´
    }

    @Scheduled(fixedRate = 60000) // æ¯åˆ†é’Ÿæ‰§è¡Œ
    public void collectMetrics() {
        // æ”¶é›†ç³»ç»ŸæŒ‡æ ‡
        // å†…å­˜ä½¿ç”¨ç‡
        // CPUä½¿ç”¨ç‡
        // æ•°æ®åº“è¿æ¥æ± çŠ¶æ€
    }
}
```

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### 1. å•å…ƒæµ‹è¯•
```java
@SpringBootTest
class PlateRecognitionServiceTest {

    @Autowired
    private PlateRecognitionService plateRecognitionService;

    @Test
    void testPlateRecognition() {
        String base64Image = "æµ‹è¯•å›¾ç‰‡çš„Base64ç¼–ç ";
        PlateRecognitionResult result = plateRecognitionService
            .recognizePlateFromBase64(base64Image);

        assertThat(result.isSuccess()).isTrue();
        assertThat(result.getPlateNumber()).isNotEmpty();
    }
}
```

### 2. é›†æˆæµ‹è¯•
```java
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
class VehicleReservationControllerTest {

    @Autowired
    private TestRestTemplate restTemplate;

    @Test
    void testCreateReservation() {
        VehicleReservation reservation = new VehicleReservation();
        // è®¾ç½®æµ‹è¯•æ•°æ®

        ResponseEntity<Result> response = restTemplate.postForEntity(
            "/parking/vehicleReservation", reservation, Result.class);

        assertThat(response.getStatusCode()).isEqualTo(HttpStatus.OK);
    }
}
```

### 3. æ€§èƒ½æµ‹è¯•
```java
@Test
void testConcurrentPlateRecognition() {
    int threadCount = 10;
    int requestsPerThread = 100;

    ExecutorService executor = Executors.newFixedThreadPool(threadCount);
    CountDownLatch latch = new CountDownLatch(threadCount);

    for (int i = 0; i < threadCount; i++) {
        executor.submit(() -> {
            try {
                for (int j = 0; j < requestsPerThread; j++) {
                    // æ‰§è¡Œè½¦ç‰Œè¯†åˆ«è¯·æ±‚
                    plateRecognitionService.recognizePlateFromBase64(testImage);
                }
            } finally {
                latch.countDown();
            }
        });
    }

    latch.await(60, TimeUnit.SECONDS);
    // éªŒè¯æ€§èƒ½æŒ‡æ ‡
}
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### 1. å¼€å‘ç¯å¢ƒéƒ¨ç½²
```bash
# 1. å…‹éš†é¡¹ç›®
git clone [é¡¹ç›®åœ°å€]

# 2. é…ç½®æ•°æ®åº“
mysql -u root -p < sql/init.sql

# 3. ä¿®æ”¹é…ç½®æ–‡ä»¶
vim src/main/resources/application.yml

# 4. å¯åŠ¨é¡¹ç›®
mvn spring-boot:run
```

### 2. ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
```bash
# 1. æ‰“åŒ…é¡¹ç›®
mvn clean package -Dmaven.test.skip=true

# 2. ä¸Šä¼ JARåŒ…åˆ°æœåŠ¡å™¨
scp target/parkingmanage-0.0.1-SNAPSHOT.jar user@server:/opt/parking/

# 3. å¯åŠ¨æœåŠ¡
nohup java -jar parkingmanage-0.0.1-SNAPSHOT.jar \
  --spring.profiles.active=prod > parking.log 2>&1 &
```

### 3. Dockeréƒ¨ç½²
```dockerfile
FROM openjdk:8-jre-alpine
COPY target/parkingmanage-0.0.1-SNAPSHOT.jar app.jar
EXPOSE 8543
ENTRYPOINT ["java", "-jar", "/app.jar"]
```

```yaml
# docker-compose.yml
version: '3.8'
services:
  parking-app:
    build: .
    ports:
      - "8543:8543"
    environment:
      - SPRING_PROFILES_ACTIVE=docker
    depends_on:
      - mysql
      - redis

  mysql:
    image: mysql:5.7
    environment:
      MYSQL_ROOT_PASSWORD: 123456
      MYSQL_DATABASE: project_lzx
    volumes:
      - mysql_data:/var/lib/mysql

  redis:
    image: redis:alpine
    ports:
      - "6379:6379"

volumes:
  mysql_data:
```

## ğŸ“š å¼€å‘æœ€ä½³å®è·µ

### 1. ä»£ç è§„èŒƒ
- **å‘½åè§„èŒƒ**: é©¼å³°å‘½åæ³•ï¼Œè§åçŸ¥æ„
- **æ³¨é‡Šè§„èŒƒ**: ç±»ã€æ–¹æ³•ã€å¤æ‚é€»è¾‘å¿…é¡»æ·»åŠ æ³¨é‡Š
- **å¼‚å¸¸å¤„ç†**: ç»Ÿä¸€å¼‚å¸¸å¤„ç†æœºåˆ¶
- **æ—¥å¿—è§„èŒƒ**: ä½¿ç”¨SLF4Jï¼Œåˆ†çº§è®°å½•æ—¥å¿—

### 2. æ•°æ®åº“è®¾è®¡åŸåˆ™
- **è¡¨åè§„èŒƒ**: å°å†™å­—æ¯+ä¸‹åˆ’çº¿
- **å­—æ®µè§„èŒƒ**: å¿…é¡»æœ‰ä¸»é”®ã€åˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´
- **ç´¢å¼•è®¾è®¡**: æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•
- **æ•°æ®ç±»å‹**: é€‰æ‹©åˆé€‚çš„æ•°æ®ç±»å‹

### 3. APIè®¾è®¡è§„èŒƒ
- **RESTfulé£æ ¼**: ä½¿ç”¨æ ‡å‡†HTTPæ–¹æ³•
- **ç»Ÿä¸€å“åº”æ ¼å¼**: ResultåŒ…è£…å“åº”æ•°æ®
- **ç‰ˆæœ¬æ§åˆ¶**: APIç‰ˆæœ¬å·ç®¡ç†
- **æ–‡æ¡£ç»´æŠ¤**: Swaggeræ–‡æ¡£å®æ—¶æ›´æ–°

## ğŸ” æ•…éšœæ’æŸ¥æŒ‡å—

### 1. å¸¸è§é—®é¢˜
#### è½¦ç‰Œè¯†åˆ«å¤±è´¥
```bash
# æ£€æŸ¥ç™¾åº¦AIé…ç½®
curl -X POST "https://aip.baidubce.com/oauth/2.0/token" \
  -d "grant_type=client_credential&client_id=YOUR_API_KEY&client_secret=YOUR_SECRET_KEY"

# æ£€æŸ¥å›¾ç‰‡æ ¼å¼
echo "æ£€æŸ¥Base64å›¾ç‰‡æ˜¯å¦æ­£ç¡®ç¼–ç "
```

#### å¾®ä¿¡æˆæƒå¤±è´¥
```bash
# æ£€æŸ¥å¾®ä¿¡é…ç½®
curl -X GET "https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=YOUR_APPID&secret=YOUR_SECRET"
```

#### æ•°æ®åº“è¿æ¥é—®é¢˜
```bash
# æ£€æŸ¥æ•°æ®åº“è¿æ¥
mysql -h www.xuerparking.cn -u root -p project_lzx -e "SELECT 1"

# æ£€æŸ¥è¿æ¥æ± çŠ¶æ€
curl http://www.xuerparking.cn:8543/actuator/health
```

### 2. æ—¥å¿—åˆ†æ
```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f ParkingDemo.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
grep "ERROR" ParkingDemo.log | tail -20

# æŸ¥çœ‹ç‰¹å®šåŠŸèƒ½æ—¥å¿—
grep "è½¦ç‰Œè¯†åˆ«" ParkingDemo.log
```

### 3. æ€§èƒ½åˆ†æ
```bash
# JVMå†…å­˜åˆ†æ
jstat -gc [PID]

# çº¿ç¨‹åˆ†æ
jstack [PID]

# CPUåˆ†æ
top -p [PID]
```

---

## ğŸ“‹ æ€»ç»“

è¿™ä¸ªæ™ºæ…§åœè½¦ç®¡ç†ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå–„ã€æŠ€æœ¯å…ˆè¿›çš„ç»¼åˆæ€§é¡¹ç›®ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

### ğŸ¯ æŠ€æœ¯äº®ç‚¹
1. **å¤šå±‚æ¶æ„è®¾è®¡**: æ¸…æ™°çš„åˆ†å±‚æ¶æ„ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•
2. **AIæŠ€æœ¯é›†æˆ**: ç™¾åº¦AIè½¦ç‰Œè¯†åˆ«ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
3. **å¾®ä¿¡ç”Ÿæ€é›†æˆ**: å°ç¨‹åºã€å…¬ä¼—å·å…¨é¢é›†æˆ
4. **æ™ºèƒ½è§’è‰²ç®¡ç†**: å››å±‚è§’è‰²åˆ¤æ–­ï¼Œæƒé™ç²¾ç¡®æ§åˆ¶
5. **å®æ—¶æ¶ˆæ¯æ¨é€**: è¶…æ—¶æé†’ã€çŠ¶æ€é€šçŸ¥åŠæ—¶åˆ°è¾¾

### ğŸš€ ä¸šåŠ¡ä»·å€¼ 
1. **æå‡æ•ˆç‡**: è‡ªåŠ¨åŒ–æµç¨‹å‡å°‘äººå·¥å¹²é¢„
2. **ç”¨æˆ·ä½“éªŒ**: å¾®ä¿¡ç”Ÿæ€æ— ç¼é›†æˆ
3. **æ™ºèƒ½ç®¡ç†**: AIæŠ€æœ¯æå‡è¯†åˆ«å‡†ç¡®ç‡
4. **æ•°æ®é©±åŠ¨**: å®Œæ•´çš„æ•°æ®ç»Ÿè®¡å’Œåˆ†æ

### ğŸ”„ å‘å±•å‰æ™¯
1. **æŠ€æœ¯æ‰©å±•**: å¯é›†æˆæ›´å¤šAIåŠŸèƒ½
2. **ä¸šåŠ¡æ‹“å±•**: æ”¯æŒæ›´å¤šåœè½¦åœºæ™¯
3. **å¹³å°åŒ–**: å¯å‘å±•ä¸ºåœè½¦ç®¡ç†å¹³å°
4. **å•†ä¸šåŒ–**: å…·å¤‡è‰¯å¥½çš„å•†ä¸šåŒ–å‰æ™¯

è¯¥é¡¹ç›®å±•ç°äº†ç°ä»£è½¯ä»¶å¼€å‘çš„æœ€ä½³å®è·µï¼Œæ˜¯å­¦ä¹ å’Œå‚è€ƒçš„ä¼˜ç§€æ¡ˆä¾‹ã€‚

---

*æœ¬æ–‡æ¡£åŸºäºé¡¹ç›®å½“å‰çŠ¶æ€ç”Ÿæˆï¼Œå¦‚æœ‰æ›´æ–°è¯·åŠæ—¶åŒæ­¥æ–‡æ¡£å†…å®¹ã€‚*
*æ–‡æ¡£ç‰ˆæœ¬: v1.0 | æ›´æ–°æ—¶é—´: 2025å¹´7æœˆ9æ—¥*
