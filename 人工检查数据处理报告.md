# 人工检查数据处理报告

## 处理日期
2024年11月22日

## 数据来源
- **输入文件**: `月票订单_20251121214212571001_fixed_需人工检查简要清单.txt`
- **输出文件**: `月票订单_20251121214212571001_manual_fixed.sql`

## 处理统计

- **原始数据**: 98条
- **生成INSERT语句**: 102条（部分数据拆分为多条）
- **处理成功率**: 100%

## 处理规则详解

### 1. 特殊房间号格式处理

#### ✅ 香A1108（缺少连字符）
```
原格式: 香A1108
处理结果: building='香榭丽舍', units='A', floor='1', roomnumber='108'
ownername: 香A1108
```

#### ✅ 白B2-1703摩托车（去除后缀）
```
原格式: 白B2-1703摩托车
处理结果: building='白金汉', units='B', floor='2', roomnumber='1703'
ownername: 白B2-1703（去除"摩托车"）
```

#### ✅ 白A3-负101/102（拆分并转换负层）
```
原格式: 白A3-负101/102
处理结果: 拆分为2条记录
  记录1: building='白金汉', units='A', floor='-1', roomnumber='101', ownername='白A3-负101'
  记录2: building='白金汉', units='A', floor='-1', roomnumber='102', ownername='白A3-负102'
```

#### ✅ 香A-108/109/205（多房间拆分）
```
原格式: 香A-108/109/205
处理结果: 拆分为3条记录
  记录1: building='香榭丽舍', units='A', floor='1', roomnumber='108', ownername='香A-108'
  记录2: building='香榭丽舍', units='A', floor='1', roomnumber='109', ownername='香A-109'
  记录3: building='香榭丽舍', units='A', floor='2', roomnumber='205', ownername='香A-205'
```

#### ✅ 白C1/703（格式修正）
```
原格式: 白C1/703
处理结果: building='白金汉', units='C', floor='1', roomnumber='703'
ownername: 白C1-703
```

#### ✅ 白B4-负1层8号（负层处理）
```
原格式: 白B4-负1层8号
处理结果: building='白金汉', units='B', floor='-1', roomnumber='108'
ownername: 白B4-负108
```

#### ✅ 维D2-1-负2（复杂负层格式）
```
原格式: 维D2-1-负2
处理结果: building='维也纳', units='D', floor='-1', roomnumber='102'
ownername: 维D2-负102
```

#### ✅ 佛A2-1-3（连续编号）
```
原格式: 佛A2-1-3
处理结果: building='佛罗伦萨', units='A', floor='2', roomnumber='103'
ownername: 佛A2-103
```

#### ✅ 巴C11/12地下室（拆分地下室）
```
原格式: 巴C11/12地下室
处理结果: 拆分为2条记录
  记录1: building='巴塞罗纳', units='C', floor='-1', roomnumber='101', ownername='巴C11-负101'
  记录2: building='巴塞罗纳', units='C', floor='-1', roomnumber='101', ownername='巴C12-负101'
```

#### ✅ 凡D2-3单元地下（单元地下）
```
原格式: 凡D2-3单元地下
处理结果: building='凡尔赛', units='D', floor='-1', roomnumber='101'
ownername: 凡D2-负101
```

### 2. 未知楼栋处理

对于不包含标准建筑简称或格式无法解析的数据，统一设置为：
- **building**: 未知楼栋
- **units**: 未知
- **floor**: 未知
- **roomnumber**: 未知
- **ownername**: 保留原车主姓名

包括但不限于：
- 武晓丽、苏楠、社区孟莎
- 三菱电梯、电梯索林源、电梯聚宝盆、电梯李宏鑫、电梯周汉双
- 河源丁俊丽、河源杨旭
- 民生周欣欣、民生赵广胤、民生毛晨虎
- 办事处、物业办、物业办康欢
- 张总朋友、张总、汝辉总
- 工程张滨、工程潘传海、工程杨晓峰
- 龙埠郑飞龙、中北盛林、中北蒋丽娜、中北高岩
- 门禁王永飞、联通杨世军
- 自来水抢修、防水郑晓翔
- 元申广电、分众传媒
- 巡逻车、公司用车
- 住建局朱大伟、电业局沈、电业局
- 分局张磊、派出所孙岩、业委会黄主任
- 商服类：香B5号商服、香B4号商服、香D3商服、香B1号商服、香B1-证卷、卢A4商铺
- 位置标识：F1-1层、F127车位、FDJ-31上、FCJ-1上
- 监控奥捷、监控小佟
- 学府顾凌云、云谷双喜
- 其他：孙丽艳、高春艳、高建磊、王江滨、李天秋、悦然甄诚、杨忠、
        东方开发、安博超、社区宿萌、社区王思雅、岳军、王晓亮、曹淑芬、
        周立民、张莹、杨国辉、张英霞、孙庆民、矫明先、盛林

### 3. 车牌号清理

所有车牌号中的"绿"字已自动去除：
- `黑AFR8656绿` → `黑AFR8656`
- `黑AFE8126绿` → `黑AFE8126`
- `黑AF61619绿` → `黑AF61619`
- `黑AF90864绿` → `黑AF90864`
- `黑AD12260绿` → `黑AD12260`
- 等等...

## 处理结果示例

### 示例1：标准格式处理
```sql
-- 香A1108 → 香榭丽舍 A座 1层 108房间
INSERT INTO monthly_ticket_owners (province, city, district, community, building, units, floor, roomnumber, ownername, ownerphone, plates, parkingspaces, isaudit, permitverify)
VALUES ('黑龙江省', '哈尔滨市', '道里区', '欧洲新城', '香榭丽舍', 'A', '1', '108', '香A1108', '18182715999', '黑A5K7F1', '1.0', '02', '02');
```

### 示例2：负层处理
```sql
-- 白A3-负101/102 → 拆分为两条记录
INSERT INTO monthly_ticket_owners (province, city, district, community, building, units, floor, roomnumber, ownername, ownerphone, plates, parkingspaces, isaudit, permitverify)
VALUES ('黑龙江省', '哈尔滨市', '道里区', '欧洲新城', '白金汉', 'A', '-1', '101', '白A3-负101', '13648509327', '黑A62RH1', '1.0', '02', '02');
INSERT INTO monthly_ticket_owners (province, city, district, community, building, units, floor, roomnumber, ownername, ownerphone, plates, parkingspaces, isaudit, permitverify)
VALUES ('黑龙江省', '哈尔滨市', '道里区', '欧洲新城', '白金汉', 'A', '-1', '102', '白A3-负102', '13648509327', '黑A62RH1', '1.0', '02', '02');
```

### 示例3：地下室拆分
```sql
-- 巴C11/12地下室 → 拆分为两条记录
INSERT INTO monthly_ticket_owners (province, city, district, community, building, units, floor, roomnumber, ownername, ownerphone, plates, parkingspaces, isaudit, permitverify)
VALUES ('黑龙江省', '哈尔滨市', '道里区', '欧洲新城', '巴塞罗纳', 'C', '-1', '101', '巴C11-负101', '13804518055', '黑AS738S,黑AZ136H,黑A04', '1.0', '02', '02');
INSERT INTO monthly_ticket_owners (province, city, district, community, building, units, floor, roomnumber, ownername, ownerphone, plates, parkingspaces, isaudit, permitverify)
VALUES ('黑龙江省', '哈尔滨市', '道里区', '欧洲新城', '巴塞罗纳', 'C', '-1', '101', '巴C12-负101', '13804518055', '黑AS738S,黑AZ136H,黑A04', '1.0', '02', '02');
```

### 示例4：未知楼栋处理
```sql
-- 三菱电梯 → 未知楼栋
INSERT INTO monthly_ticket_owners (province, city, district, community, building, units, floor, roomnumber, ownername, ownerphone, plates, parkingspaces, isaudit, permitverify)
VALUES ('黑龙江省', '哈尔滨市', '道里区', '欧洲新城', '未知楼栋', '未知', '未知', '未知', '三菱电梯', '18645177102', '黑AW973P,黑A81RR2,黑A8R', '1.0', '02', '02');
```

## 数据分类统计

### 按处理类型分类
- **特殊房间号格式处理**: 10条（含拆分后共14条INSERT）
- **未知楼栋**: 88条
- **总计**: 98条原始数据 → 102条INSERT语句

### 按楼栋分类
- **香榭丽舍**: 4条
- **凡尔赛**: 1条
- **维也纳**: 1条
- **巴塞罗纳**: 2条
- **白金汉**: 5条
- **佛罗伦萨**: 1条
- **未知楼栋**: 88条

## 验证结果

✅ 所有98条原始数据已成功处理  
✅ 特殊格式房间号正确拆分和转换  
✅ 负层编号统一使用-1表示  
✅ 车牌号"绿"字已清理  
✅ Building字段使用全称  
✅ 未识别数据统一标记为"未知楼栋"  

## 后续建议

1. **未知楼栋数据**: 这88条"未知楼栋"的数据建议联系相关负责人进行人工确认和补充完整信息。

2. **数据导入**: 可以直接使用生成的SQL文件导入数据库：
   ```bash
   mysql -u username -p parking_management < 月票订单_20251121214212571001_manual_fixed.sql
   ```

3. **数据验证**: 导入后建议执行以下查询验证：
   ```sql
   -- 查看未知楼栋数据
   SELECT * FROM monthly_ticket_owners WHERE building = '未知楼栋';
   
   -- 查看负层数据
   SELECT * FROM monthly_ticket_owners WHERE floor = '-1';
   
   -- 验证特殊处理的数据
   SELECT * FROM monthly_ticket_owners WHERE ownername IN ('香A1108', '白B2-1703', '佛A2-103', '维D2-负102');
   ```

## 文件清单

- ✅ 输入文件: `月票订单_20251121214212571001_fixed_需人工检查简要清单.txt`
- ✅ 输出SQL: `月票订单_20251121214212571001_manual_fixed.sql`
- ✅ 处理脚本: `process_manual_check_data.py`
- ✅ 处理报告: `人工检查数据处理报告.md`
